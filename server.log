
> trustee-portal-backend@2.0.0-saas start
> node server.js

âœ… Using Supabase (PostgreSQL) database
âš ï¸ Email not configured. Set SMTP_HOST and SMTP_USER environment variables.
ğŸ”„ Starting notification scheduler...
ğŸ“§ Checking trial expirations...
ğŸ“Š Checking limit warnings...
ğŸ’³ Checking past due subscriptions...
âœ… Notification scheduler started

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                  â•‘
â•‘   ğŸ›ï¸  Trustee Portal API Server - SaaS Edition                  â•‘
â•‘                                                                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘   Server running on http://localhost:3001                      â•‘
â•‘   Database: Supabase (PostgreSQL)                               â•‘
â•‘                                                                  â•‘
â•‘   SaaS Features:                                                 â•‘
â•‘   â€¢ Multi-tenant architecture                                    â•‘
â•‘   â€¢ Organization management                                      â•‘
â•‘   â€¢ Subscription plans & trials                                  â•‘
â•‘   â€¢ Role-based access control                                    â•‘
â•‘   â€¢ Stripe billing integration                                   â•‘
â•‘   â€¢ Usage tracking & limits                                      â•‘
â•‘                                                                  â•‘
â•‘   API Endpoints:                                                 â•‘
â•‘   â€¢ POST /api/auth/saas/login          - SaaS Login              â•‘
â•‘   â€¢ POST /api/auth/saas/register       - SaaS Register           â•‘
â•‘   â€¢ GET  /api/organizations/my         - My Organizations        â•‘
â•‘   â€¢ POST /api/organizations            - Create Organization     â•‘
â•‘   â€¢ GET  /api/saas/info                - Plans & Pricing         â•‘
â•‘   â€¢ GET  /api/billing/subscription     - Subscription Details    â•‘
â•‘   â€¢ POST /api/billing/subscribe        - Subscribe to Plan       â•‘
â•‘   â€¢ GET  /api/billing/usage            - Current Usage           â•‘
â•‘   â€¢ GET  /api/usage                    - Organization Usage      â•‘
â•‘   â€¢ GET  /api/platform/stats           - Platform Stats          â•‘
â•‘   â€¢ GET  /api/export/organization      - Export Organization     â•‘
â•‘   â€¢ GET  /api/export/user              - Export User Data        â•‘
â•‘   â€¢ GET  /api/export/organization      - Export Organization     â•‘
â•‘   â€¢ GET  /api/export/user              - Export User Data        â•‘
â•‘   â€¢ Rate limiting per organization                               â•‘
â•‘   â€¢ Email notifications & scheduled tasks                        â•‘
â•‘   â€¢ White-label branding & custom domains                        â•‘
â•‘                                                                  â•‘
â•‘   Legacy endpoints still available at /api/auth/*                â•‘
â•‘                                                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
Press Ctrl+C to stop the server

Send limit warnings error: {
  code: 'PGRST200',
  details: "Searched for a foreign key relationship between 'organizations' and 'subscription_plans' in the schema 'public', but no matches were found.",
  hint: "Perhaps you meant 'conversations' instead of 'subscription_plans'.",
  message: "Could not find a relationship between 'organizations' and 'subscription_plans' in the schema cache"
}
âœ… Sent 0 limit warnings
âœ… Sent 0 past due warnings
âœ… Sent 0 trial reminders
2026-02-25T15:04:43.689Z GET /api/health
2026-02-25T15:05:46.588Z GET /api/health
2026-02-25T15:07:05.782Z GET /
2026-02-25T15:07:06.631Z GET /js/app.js
2026-02-25T15:07:06.633Z GET /js/trustees.js
2026-02-25T15:07:07.258Z GET /js/currency.js
2026-02-25T15:07:07.527Z GET /css/styles.css
2026-02-25T15:07:07.534Z GET /js/profile-account.js
2026-02-25T15:07:07.571Z GET /js/api.js
2026-02-25T15:07:07.574Z GET /js/platform-admin.js
2026-02-25T15:07:08.217Z GET /api/health
2026-02-25T15:07:08.263Z GET /modules/meetings.html
2026-02-25T15:07:08.288Z GET /modules/dashboard.html
2026-02-25T15:07:08.291Z GET /modules/committees.html
2026-02-25T15:07:08.292Z GET /modules/recruitment.html
2026-02-25T15:07:08.293Z GET /modules/onboarding.html
2026-02-25T15:07:08.839Z GET /modules/training.html
2026-02-25T15:07:08.870Z GET /api/auth/saas/me
2026-02-25T15:07:08.872Z GET /modules/calendar.html
2026-02-25T15:07:08.876Z GET /modules/messaging.html
2026-02-25T15:07:08.876Z GET /modules/trustees.html
2026-02-25T15:07:08.951Z GET /modules/tasks.html
2026-02-25T15:07:09.429Z GET /modules/policies.html
2026-02-25T15:07:09.461Z GET /modules/platform-admin.html
2026-02-25T15:07:09.466Z GET /modules/account.html
2026-02-25T15:07:09.468Z GET /modules/minutes.html
2026-02-25T15:07:09.543Z GET /modules/admin.html
2026-02-25T15:07:09.600Z GET /modules/billing.html
2026-02-25T15:07:10.015Z GET /modules/profile.html
2026-02-25T15:07:10.041Z GET /favicon.ico
2026-02-25T15:07:10.097Z GET /api/dashboard
Dashboard error: {
  code: '42703',
  details: null,
  hint: null,
  message: 'column committees_1.nameascommittee_name does not exist'
}
2026-02-25T15:07:46.424Z PUT /api/auth/saas/profile
2026-02-25T15:08:13.698Z PUT /api/auth/saas/profile
2026-02-25T15:09:07.823Z PUT /api/auth/saas/profile
2026-02-25T15:09:13.023Z PUT /api/auth/saas/profile
2026-02-25T15:09:33.796Z PUT /api/auth/saas/profile
2026-02-25T15:09:54.653Z PUT /api/auth/saas/profile
2026-02-25T15:12:42.904Z GET /
2026-02-25T15:12:43.577Z GET /css/styles.css
2026-02-25T15:12:43.580Z GET /js/api.js
2026-02-25T15:12:45.334Z GET /js/app.js
2026-02-25T15:12:45.356Z GET /js/profile-account.js
2026-02-25T15:12:45.359Z GET /js/currency.js
2026-02-25T15:12:45.360Z GET /js/trustees.js
2026-02-25T15:12:45.365Z GET /js/platform-admin.js
2026-02-25T15:12:45.368Z GET /api/health
2026-02-25T15:12:47.178Z GET /api/auth/saas/me
2026-02-25T15:12:47.179Z GET /modules/dashboard.html
2026-02-25T15:12:47.182Z GET /modules/committees.html
2026-02-25T15:12:47.186Z GET /modules/meetings.html
2026-02-25T15:12:47.189Z GET /modules/recruitment.html
2026-02-25T15:12:47.189Z GET /modules/training.html
2026-02-25T15:12:48.108Z GET /modules/onboarding.html
2026-02-25T15:12:48.110Z GET /modules/messaging.html
2026-02-25T15:12:48.114Z GET /modules/calendar.html
2026-02-25T15:12:49.046Z GET /modules/trustees.html
2026-02-25T15:12:49.049Z GET /modules/tasks.html
2026-02-25T15:12:49.056Z GET /modules/minutes.html
2026-02-25T15:12:49.072Z GET /modules/policies.html
2026-02-25T15:12:49.088Z GET /modules/billing.html
2026-02-25T15:12:49.090Z GET /modules/platform-admin.html
2026-02-25T15:12:50.012Z GET /modules/admin.html
2026-02-25T15:12:50.016Z GET /modules/profile.html
2026-02-25T15:12:50.023Z GET /modules/account.html
2026-02-25T15:12:50.045Z GET /favicon.ico
2026-02-25T15:12:50.055Z GET /api/dashboard
Dashboard error: {
  code: '42703',
  details: null,
  hint: null,
  message: 'column committees_1.nameascommittee_name does not exist'
}
2026-02-25T15:13:28.380Z PUT /api/auth/saas/profile
2026-02-25T15:13:29.223Z GET /api/auth/saas/me
